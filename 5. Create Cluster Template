# Create Cluster Template with 1 master node and 3 worker nodes
$ openstack dataprocessing cluster template create --name vanilla-default-cluster --node-groups vanilla-default-master:1 vanilla-default-worker:3
 
# Create a keypair
$ openstack keypair create mystack --publickey ~/.ssh/id_rsa.pub
 
# Launch Cluster with mystack key
$ openstack dataprocessing cluster create --name my-cluster --cluster-template vanilla-default-cluster --user-keypair mystack --neutron-network private --image sahara-vanilla-latest-ubuntu
 
# The process takes time, Check the progress
$ openstack dataprocessing cluster show my-cluster --show-progress
# Get the IP of the master node from the final output screen

#############################################################################################################################################################################################################
# Command Guide:                                                                                                                                                                                            #
# openstack dataprocessing cluster template create --name <cluster template name> --node-groups <master node group template>:<no. of master (usually 1)> <worker node group template name>:<no. of workers> #
# openstack keypair create mystack --publickey <Path to your public key>                                                                                                                                    #
# openstack dataprocessing cluster create --name <cluster name> --cluster-template <cluster template name> --user-keypair <key name> --neutron-network private --image <image name registered with sahara>  #
#############################################################################################################################################################################################################

###############################################################################################################################################################################################################################################################################################################
| Output Screen:                                                                                                                                                                                                                                                                                              |
+---------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Field                                                                           | Value                                                                                                                                                                                                                     |
+---------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Anti affinity                                                                   |                                                                                                                                                                                                                           |
| Cluster template id                                                             | cade1428-bba2-4926-9565-e58278c84160                                                                                                                                                                                      |
| Description                                                                     | None                                                                                                                                                                                                                      |
| Id                                                                              | 2f854e0e-7974-4935-b0bd-a7cf09c8d66a                                                                                                                                                                                      |
| Image                                                                           | 3c154877-4685-492d-9171-dab14e5f1bf1                                                                                                                                                                                      |
| Info                                                                            | {u'HDFS': {u'NameNode': u'hdfs://my-cluster-vanilla-default-master-lt-0:9000', u'Web UI': u'http://172.24.4.4:50070'}, u'YARN': {u'Web UI': u'http://172.24.4.4:8088', u'ResourceManager': u'http://172.24.4.4:8032'}} |
| Is protected                                                                    | False                                                                                                                                                                                                                     |
| Is public                                                                       | False                                                                                                                                                                                                                     |
| Is transient                                                                    | False                                                                                                                                                                                                                     |
| Name                                                                            | my-cluster-lt                                                                                                                                                                                                             |
| Neutron management network                                                      | 3a8f51f4-af29-4eb1-aa8f-1fc70a3ce671                                                                                                                                                                                      |
| Node groups                                                                     | vanilla-default-master-lt:1, vanilla-default-worker-lt:3                                                                                                                                                                  |
| Plugin name                                                                     | vanilla                                                                                                                                                                                                                   |
| Plugin version                                                                  | 2.7.1                                                                                                                                                                                                                     |
| Status                                                                          | Active                                                                                                                                                                                                                    |
| Use autoconfig                                                                  | False                                                                                                                                                                                                                     |
| User keypair id                                                                 | my_stack                                                                                                                                                                                                                  |
|                                                                                 |                                                                                                                                                                                                                           |
| Engine: create cluster: Create Heat stack                                       | Step completed successfully                                                                                                                                                                                               |
| Engine: create cluster: Assign IPs                                              | Step completed successfully                                                                                                                                                                                               |
| Engine: create cluster: Wait for instance accessibility                         | Step completed successfully                                                                                                                                                                                               |
| Engine: create cluster: Configure instances                                     | Step completed successfully                                                                                                                                                                                               |
| Plugin: configure cluster: Configure instances                                  | Step completed successfully                                                                                                                                                                                               |
| Plugin: configure cluster: Configure topology data                              | Step completed successfully                                                                                                                                                                                               |
| Plugin: start cluster: Start the following process(es): NameNode                | Step completed successfully                                                                                                                                                                                               |
| Plugin: start cluster: Start the following process(es): ResourceManager         | Step completed successfully                                                                                                                                                                                               |
| Plugin: start cluster: Start the following process(es): DataNodes, NodeManagers | Step completed successfully                                                                                                                                                                                               |
| Plugin: start cluster: Await DataNodes start up                                 | Step completed successfully                                                                                                                                                                                               |
+---------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
